<!DOCTYPE html>
<html lang="en" data-ng-app="ContactApp">
<head>
    <meta charset="UTF-8">
    <title>TD2 Exercice 2</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.1/angular.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/controller.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
</head>
<body data-ng-controller="ContactController as contactCtrl">

<div class="form-group">
    <input data-ng-model="contactCtrl.filtre" type="text" class="form-control" id="exampleInputEmail1" placeholder="Filter">
</div>

<table class="table table-striped">
    <tr>
        <th>Nom</th>
        <th>Prénom</th>
        <th>Email</th>
        <th colspan="2">Actions</th>
    </tr>

    <tr data-ng-repeat="contact in contactCtrl.contacts | filter:contactCtrl.filtre" data-ng-show="contact.deleted == false">
        <td>{{contact.nom}}</td>
        <td>{{contact.prenom}}</td>
        <td>{{contact.email}}</td>
        <td><button data-ng-click="contactCtrl.toUpdate(contact)" class="btn btn-primary"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span></button></td>
        <td><button data-ng-click="contactCtrl.delete(contact)" class="btn btn-danger"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button></td>
    </tr>
</table>

<button type="button" data-ng-click="contactCtrl.toAdd()" class="btn btn-primary">Ajouter un contact</button>
<button type="button" data-ng-show="contactCtrl.contacts.length-contactCtrl.countContact() > 0" data-ng-click="contactCtrl.cancel()" class="btn btn-danger">Annuler la suppression ({{contactCtrl.contacts.length-contactCtrl.countContact()}})</button>

<br><br>
<ng-pluralize count="contactCtrl.countContact()"
              when="{'0': 'Aucun résultat',
                         '1': '1 contact trouvé',
                         'other': '{} contacts trouvés'}">
</ng-pluralize>
<br><br>

<form class="form-inline" data-ng-show="contactCtrl.add == true">
    <h1>Ajouter un contact</h1>
    <div class="form-group">
        <input type="text" data-ng-model="contactCtrl.tmpContact.nom" class="form-control" placeholder="Entrez un nom...">
    </div>
    <div class="form-group">
        <input type="text" data-ng-model="contactCtrl.tmpContact.prenom" class="form-control" placeholder="Prénom...">
    </div>
    <div class="form-group">
        <input type="email" data-ng-model="contactCtrl.tmpContact.email" class="form-control" placeholder="Adresse email...">
    </div>
    <button data-ng-click="contactCtrl.addContact()" type="submit" class="btn btn-default">Ajouter</button>
    <button data-ng-click="contactCtrl.add = false" type="submit" class="btn btn-default">Annuler</button>
</form>

<form class="form-inline" data-ng-show="contactCtrl.edit == true">
    <h1>Modifier un contact</h1>
    <div class="form-group">
        <input type="text" data-ng-model="contactCtrl.tmpContact.nom" class="form-control" value="{{contactCtrl.tmpContact.nom}}">
    </div>
    <div class="form-group">
        <input type="text" data-ng-model="contactCtrl.tmpContact.prenom" class="form-control" value="{{contactCtrl.tmpContact.prenom}}">
    </div>
    <div class="form-group">
        <input type="email" data-ng-model="contactCtrl.tmpContact.email" class="form-control" value="{{contactCtrl.tmpContact.email}}">
    </div>
    <button data-ng-click="contactCtrl.update()" type="submit" class="btn btn-default">Modifier</button>
    <button data-ng-click="contactCtrl.edit = false" type="submit" class="btn btn-default">Annuler</button>
</form>

</body>
</html>